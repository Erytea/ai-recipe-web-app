# Настройка Aerich для миграций базы данных

Aerich - это инструмент для управления миграциями базы данных в Tortoise ORM.

## Первоначальная настройка

1. **Инициализация Aerich:**
   ```bash
   aerich init -t bot.core.models.TORTOISE_ORM
   aerich init-db
   ```

2. **Создание миграций:**
   После изменения моделей в `bot/core/models.py`:
   ```bash
   aerich migrate --name "описание_изменений"
   ```

3. **Применение миграций:**
   ```bash
   aerich upgrade
   ```

4. **Откат миграций:**
   ```bash
   aerich downgrade
   ```

5. **Просмотр истории миграций:**
   ```bash
   aerich history
   ```

## Важные замечания

- Миграции хранятся в папке `migrations/`
- Перед применением миграций в продакшене сделайте резервную копию БД
- Не редактируйте уже примененные миграции
- Для SQLite миграции могут быть ограничены (некоторые операции не поддерживаются)

## Обновление конфигурации БД

Если изменился URL базы данных, обновите его в:
- `bot/core/config.py` (переменная `database_url`)
- `.env` файл (если используется)

Aerich автоматически использует настройки из `TORTOISE_ORM` в `bot/core/models.py`.



